<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
        <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='main.css') }}"/>
    </head>
<body class="">
    
    <div class="jumbotron jumbotron-fluid bg-success text-white">
        <div class="container">
            <h1 class="display-1">Registration</h1>
            <p class="lead">Keep Your Sun Devils Card Ready<p>
        </div>
    </div>
    <div class="container">
        <p id="demo" class="display-4">Swipe Your card</p>
        <input type="password" id="student-id" onkeydown="keydownFunction()" onkeyup="keyupFunction()"/> 
        <!-- <div class="spinner-border"></div> -->
    </div>
    
<script>
    var typingTimer;                //timer identifier
    var doneTypingInterval = 2000;  //time in ms, 2 second for example
    
    //user is "finished typing," do something
    function doneTyping () {
        var swipedString = document.getElementById("student-id").value;
        var asuid = getAsuId(swipedString)
        alert(asuid);
        
    }

    function getAsuId(swipedString){
        
        //;601744121725328421217253284?
        //https://www.google.com/search?sxsrf=ALeKk03-QHI1l0gy0kGQAUZjX4BJaBf9ug%3A1597981774867&ei=TkQ_X_2uNIjN0PEPhPOHuAs&q=%3B601744121725328421217253284%3F&oq=%3B601744121725328421217253284%3F&gs_lcp=CgZwc3ktYWIQAzIHCCMQ6gIQJzIHCCMQ6gIQJzIHCCMQ6gIQJzIHCCMQ6gIQJzIHCCMQ6gIQJzIHCCMQ6gIQJzIHCCMQ6gIQJzIHCCMQ6gIQJzIHCCMQ6gIQJzIHCCMQ6gIQJ1DeX1jMcmDTcmgCcAB4AIABAIgBAJIBAJgBAKABAaoBB2d3cy13aXqwAQrAAQE&sclient=psy-ab&ved=0ahUKEwj9jbGAsqvrAhWIJjQIHYT5AbcQ4dUDCAw&uact=5
        
        var out = swipedString.substring(swipedString.length-11, swipedString.length-1);
        
        return out

    }


    function keydownFunction() {
        clearTimeout(typingTimer);
    }

    function keyupFunction() {
        clearTimeout(typingTimer);
        typingTimer = setTimeout(doneTyping, doneTypingInterval);
    }

</script>
<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
</body>
</html>
